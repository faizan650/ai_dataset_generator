from fastapi import APIRouter, Query
from database import queries_collection

router = APIRouter(prefix="/queries", tags=["User Queries"])

@router.get("/user")
def get_user_queries(user_email: str = Query(...)):
    """Return all datasets generated by this user."""
    queries = list(queries_collection.find({"user_email": user_email}, {"_id": 0}))
    return {"queries": queries}
